<!DOCTYPE HTML><html><head><meta charset=utf-8><title>函数式语言的特点 | Catullus | a Latin poet of the late Roman Republic</title><meta name=author content=Yann-Wang><meta name=description content=写技术，写心情，写日记><meta name=keywords content="functional language,functional programming"><meta id=viewport name=viewport content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui"><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=black><meta property=og:title content=函数式语言的特点><meta property=og:site_name content=Catullus><meta property=og:image content=/favicon.ico><link href=/favicon.ico rel=icon><link rel=alternate href=/atom.xml title=Catullus type=application/atom+xml><link rel=stylesheet href=/css/style.css media=screen type=text/css></head><body><div class=blog><div class=content><header><div class=site-branding><h1 class=site-title><a href="/">Catullus</a></h1><p class=site-description>a Latin poet of the late Roman Republic</p></div><nav class=site-navigation><ul><li><a href="/">Home</a></li><li><a href=/archives>Archives</a></li></ul></nav></header><main class="site-main posts-loop"><article><h3 class=article-title><span>函数式语言的特点</span></h3><div class=article-top-meta><span class=posted-on><a href="/2016/09/16/the feature of functional language/" rel=bookmark><time class="entry-date published" datetime=2016-09-16T13:40:55.000Z>2016-09-16</time></a></span></div><div class=article-content><div class=entry><h3 id=概念><a href=#概念 class=headerlink title=概念></a>概念</h3><h4 id=编程范式><a href=#编程范式 class=headerlink title=编程范式></a>编程范式</h4><ul><li>函数式编程是一种编程范式，我们常见的编程范式有命令式编程（Imperative programming），函数式编程，逻辑式编程，常见的面向对象编程是也是一种命令式编程。</li><li>命令式编程是面向计算机硬件的抽象，有变量（对应着存储单元），赋值语句（获取，存储指令），表达式（内存引用和算术运算）和控制语句（跳转指令），一句话，命令式程序就是一个冯诺依曼机的指令序列。</li><li>而函数式编程是面向数学的抽象，将计算描述为一种表达式求值，一句话，函数式程序就是一个表达式。</li></ul><h4 id=编程范型和编程语言之间的关系><a href=#编程范型和编程语言之间的关系 class=headerlink title=编程范型和编程语言之间的关系></a>编程范型和编程语言之间的关系</h4><ul><li>编程范型和编程语言之间的关系可能十分复杂，由于一个编程语言可以支持多种范型。例如，C++设计时，支持过程化编程、面向对象编程以及泛型编程。然而，设计师和程序员们要考虑如何使用这些范型元素来构建一个程序。一个人可以用C++写出一个完全过程化的程序，另一个人也可以用C++写出一个纯粹的面向对象程序，甚至还有人可以写出杂揉了两种范型的程序。</li></ul><a id=more></a><h4 id=函数式编程的本质><a href=#函数式编程的本质 class=headerlink title=函数式编程的本质></a>函数式编程的本质</h4><ul><li>函数式编程中的函数这个术语不是指计算机中的函数（实际上是Subroutine），而是指数学中的函数，即自变量的映射。也就是说一个函数的值仅决定于函数参数的值，不依赖其他状态。比如sqrt(x)函数计算x的平方根，只要x不变，不论什么时候调用，调用几次，值都是不变的。</li><li>在函数式语言中，函数作为一等公民，可以在任何地方定义，在函数内或函数外，可以作为函数的参数和返回值，可以对函数进行组合。</li><li>纯函数式编程语言中的变量也不是命令式编程语言中的变量，即存储状态的单元，而是代数中的变量，即一个值的名称。变量的值是不可变的（immutable），也就是说不允许像命令式编程语言中那样多次给一个变量赋值。比如说在命令式编程语言我们写“x = x + 1”，这依赖可变状态的事实，拿给程序员看说是对的，但拿给数学家看，却被认为这个等式为假。</li><li>函数式语言的如条件语句，循环语句也不是命令式编程语言中的控制语句，而是函数的语法糖，比如在Scala语言中，if else不是语句而是三元运算符，是有返回值的。</li><li>严格意义上的函数式编程意味着不使用可变的变量，赋值，循环和其他命令式控制结构进行编程。</li></ul><h4 id=函数式语言的特点><a href=#函数式语言的特点 class=headerlink title=函数式语言的特点></a>函数式语言的特点</h4><ul><li>变量值不可变<ul><li>由于变量不可变，纯函数编程语言无法实现循环，这是因为For循环使用可变的状态作为计数器，而While循环或DoWhile循环需要可变的状态作为跳出循环的条件。因此在函数式语言里就只能使用递归来解决迭代问题，这使得函数式编程严重依赖递归。</li></ul></li><li>高阶函数（Higher-order function）<ul><li>高阶函数就是参数为函数或返回值为函数的函数。有了高阶函数，就可以将复用的粒度降低到函数级别，相对于面向对象语言，复用的粒度更低。</li><li>高阶函数提供了一种函数级别上的依赖注入（或反转控制）机制，在上面的例子里，sum函数的逻辑依赖于注入进来的函数的逻辑。很多GoF设计模式都可以用高阶函数来实现，如Visitor，Strategy，Decorator等。比如Visitor模式就可以用集合类的map()或foreach()高阶函数来替代。</li><li>函数式语言通常提供非常强大的集合类（Collection），提供很多高阶函数，因此使用非常方便。</li></ul></li><li>惰性求值（Lazy evaluation，也称作call-by-need）<ul><li>惰性求值是在将表达式赋值给变量（或称作绑定）时并不计算表达式的值，而在变量第一次被使用时才进行计算。这样就可以通过避免不必要的求值提升性能。在Scala里，通过lazy val来指定一个变量是惰性求值的。</li></ul></li><li>模式匹配（Pattern Match）与 代数数据类型（Algebraic data type）<ul><li>在函数式编程语言中可以定义代数数据类型（Algebraic data type），通过组合已有的数据类型形成新的数据类型，如在Scala中提供case class，代数数据类型的值可以通过模式匹配进行分析。</li></ul></li><li>偏应用函数（Partially Applied Functions）和 柯里化（Currying）<ul><li>偏函数 解决这样的问题：如果我们有函数是多个参数的，我们希望能固定其中某几个参数的值。</li><li>偏函数应用是找一个函数，固定其中的几个参数值，从而得到一个新的函数。</li><li>函数加里化是一种使用匿名单参数函数来实现多参数函数的方法。</li><li>函数加里化能够让你轻松的实现某些偏函数应用。返回固定部分参数的函数。</li><li>有些语言(例如 Haskell, OCaml)所有的多参函数都是在内部通过函数加里化实现的。</li></ul></li><li>闭包（closure）<ul><li>闭包的基础：函数是一等公民（First-class function）</li><li>因为内嵌函数（nested functions）可以存储在变量里，实例化之后并不需要马上执行，而通常的函数调用（比如C）的实例化和执行这两个过程是不分开的。在这种情况下，函数的信息（比如参数），在函数实例化之后仍需要保存。 函数的信息不能再储存在栈（stack），而要储存在堆（heap）里。 这也意味着函数式编程语言的runtime一般都具有垃圾回收（Garbage Collection）功能，当某个函数没有变量指向它时，GC再把它的内存回收。</li></ul></li></ul><h4 id=总结><a href=#总结 class=headerlink title=总结></a>总结</h4><ul><li>函数式编程是给软件开发者提供的另一套工具箱，为我们提供了另外一种抽象和思考的方式。</li><li>函数式编程也有不太擅长的场合，比如处理可变状态和处理IO，要么引入可变变量，要么通过Monad来进行封装（如State Monad和IO Monad）</li></ul></div></div><div class=article-footer><div class="article-meta pull-left"><span class=post-categories><i class=icon-categories></i> <a href="/categories/technology/">technology</a></span> <span class=post-tags><i class=icon-tags></i> <a href="/tags/functional-language/">functional language</a><a href="/tags/functional-programming/">functional programming</a></span></div></div></article><div id=comment><div class=ds-thread data-thread-key="/2016/09/16/the feature of functional language/" data-title=函数式语言的特点 data-url="http://www.wangyn.net/2016/09/16/the feature of functional language/"></div><script type=text/javascript>
	var duoshuoQuery = {short_name:"Yann-Wang"};
	  (function() {
	    var ds = document.createElement('script');
	    ds.type = 'text/javascript';ds.async = true;
	    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
	    ds.charset = 'UTF-8';
	    (document.getElementsByTagName('head')[0] 
	     || document.getElementsByTagName('body')[0]).appendChild(ds);
	  })();
	  </script></div></main><footer class=site-footer><p class=site-info>Proudly powered by <a href="https://hexo.io/" target=_blank>Hexo</a> and Theme by <a href=https://github.com/CodeDaraW/Hacker target=_blank>Hacker</a><br>&copy; 2016 Yann-Wang</p></footer></div></div></body></html>