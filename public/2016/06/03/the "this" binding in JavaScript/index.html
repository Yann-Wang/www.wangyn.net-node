<!doctype html><html class="theme-next pisces use-motion"><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width, initial-scale=1, maximum-scale=1"><meta http-equiv=Cache-Control content=no-transform><meta http-equiv=Cache-Control content=no-siteapp><link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel=stylesheet type=text/css><link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel=stylesheet type=text/css><link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel=stylesheet type=text/css><link href="/css/main.css?v=5.0.1" rel=stylesheet type=text/css><meta name=keywords content=this,bind,javascirpt,><link rel="shortcut icon" type=image/x-icon href="/favicon.ico?v=5.0.1"><meta name=description content="javascript 中的 this 绑定默认绑定：non-strict mode ： this 指向全局对象；strict mode : this 绑定 undefined注：决定this绑定对象的并不是调用位置是否处于严格模式，而是函数体是否处于严格模式。软绑定给默认绑定指定一个全局对象和undefined以外的值，可以实现和硬绑定相同的效果，同时保留隐式绑定或者显式绑定修改this的能力。对"><meta property=og:type content=article><meta property=og:title content="javascript 中的 this 绑定"><meta property=og:url content=http://Yann-Wang.github.io/2016/06/03/the this" binding in javascript index.html"><meta property=og:site_name content=Catullus><meta property=og:description content="javascript 中的 this 绑定默认绑定：non-strict mode ： this 指向全局对象；strict mode : this 绑定 undefined注：决定this绑定对象的并不是调用位置是否处于严格模式，而是函数体是否处于严格模式。软绑定给默认绑定指定一个全局对象和undefined以外的值，可以实现和硬绑定相同的效果，同时保留隐式绑定或者显式绑定修改this的能力。对"><meta property=og:updated_time content=2016-08-22T06:48:04.156Z><meta name=twitter:card content=summary><meta name=twitter:title content="javascript 中的 this 绑定"><meta name=twitter:description content="javascript 中的 this 绑定默认绑定：non-strict mode ： this 指向全局对象；strict mode : this 绑定 undefined注：决定this绑定对象的并不是调用位置是否处于严格模式，而是函数体是否处于严格模式。软绑定给默认绑定指定一个全局对象和undefined以外的值，可以实现和硬绑定相同的效果，同时保留隐式绑定或者显式绑定修改this的能力。对"><script type=text/javascript id=hexo.configuration>
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 6291864925467854000,
      author: '主编大人'
    }
  };
</script><title>javascript 中的 this 绑定 | Catullus</title></head><body itemscope itemtype=http://schema.org/WebPage lang=zh-Hans><script type=text/javascript>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?ab2b4d74812ff190b8d084d3f79c3212";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script><div class="container one-collumn sidebar-position-left page-post-detail"><div class=headband></div><header id=header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-meta><div class=custom-logo-site-title><a href="/" class=brand rel=start><span class=logo-line-before><i></i></span> <span class=site-title>Catullus</span> <span class=logo-line-after><i></i></span></a></div><p class=site-subtitle>a Latin poet of the late Roman Republic</p></div><div class=site-nav-toggle><button><span class=btn-bar></span> <span class=btn-bar></span> <span class=btn-bar></span></button></div><nav class=site-nav><ul id=menu class=menu><li class="menu-item menu-item-home"><a href="/" rel=section><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-categories"><a href=/categories rel=section><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-about"><a href=/about rel=section><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-archives"><a href=/archives rel=section><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-tags"><a href=/tags rel=section><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li></ul></nav></div></header><main id=main class=main><div class=main-inner><div class=content-wrap><div id=content class=content><div id=posts class=posts-expand><article class="post post-type-normal" itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">javascript 中的 this 绑定</h1><div class=post-meta><span class=post-time><span class=post-meta-item-icon><i class="fa fa-calendar-o"></i></span> <span class=post-meta-item-text>发表于</span><time itemprop=dateCreated datetime=2016-06-03T00:00:00+08:00 content=2016-06-03>2016-06-03</time></span> <span class=post-category>&nbsp; | &nbsp; <span class=post-meta-item-icon><i class="fa fa-folder-o"></i></span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=https://schema.org/Thing><a href="/categories/技术/" itemprop=url rel=index><span itemprop=name>技术</span></a></span></span> <span class=post-comments-count>&nbsp; | &nbsp; <a href=/2016/06/03/the this" binding in javascript #comments" itemprop=discussionUrl><span class="post-comments-count ds-thread-count" data-thread-key=2016/06/03/the this" binding in javascript " itemprop=commentsCount></span></a></span></div></header><div class=post-body itemprop=articleBody><h2 id=javascript-中的-this-绑定><a href=#javascript-中的-this-绑定 class=headerlink title="javascript 中的 this 绑定"></a>javascript 中的 this 绑定</h2><h3 id=默认绑定：><a href=#默认绑定： class=headerlink title=默认绑定：></a>默认绑定：</h3><ul><li>non-strict mode ： this 指向全局对象；</li><li>strict mode : this 绑定 undefined<br>注：决定this绑定对象的并不是调用位置是否处于严格模式，而是函数体是否处于严格模式。</li></ul><h3 id=软绑定><a href=#软绑定 class=headerlink title=软绑定></a>软绑定</h3><ul><li>给默认绑定指定一个全局对象和undefined以外的值，可以实现和硬绑定相同的效果，同时保留隐式绑定或者显式绑定修改this的能力。</li><li><p>对指定的函数进行封装，首先检查调用时的this，如果this绑定到全局对象或者undefined， 那就把指定的默认对象obj绑定到this， 否则不会修改this。</p><a id=more></a><figure class="highlight javascript"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br></pre></td><td class=code><pre><span class=line> <span class=keyword>if</span> (!<span class=built_in>Function</span>.prototype.softBind)&#123;</span><br><span class=line>      <span class=built_in>Function</span>.prototype.softBind = <span class=function><span class=keyword>function</span>(<span class=params>obj</span>) </span>&#123;</span><br><span class=line>           <span class=keyword>var</span> fn = <span class=keyword>this</span>;  <span class=comment>// this指代的是调用softBind的那个函数对象，即foo</span></span><br><span class=line>           <span class=comment>//捕获所有curried参数</span></span><br><span class=line>           <span class=keyword>var</span> curried = [].slice.call(<span class=built_in>arguments</span>, <span class=number>1</span>);</span><br><span class=line>           <span class=keyword>var</span> bound   = <span class=function><span class=keyword>function</span>(<span class=params></span>) </span>&#123;</span><br><span class=line>                <span class=keyword>return</span> fn.apply(</span><br><span class=line>                     (!<span class=keyword>this</span> || <span class=keyword>this</span> === (<span class=built_in>window</span> || global)) ? obj : <span class=keyword>this</span>,</span><br><span class=line>                     curried.concat.apply(curried, <span class=built_in>arguments</span>)</span><br><span class=line>                );</span><br><span class=line>           &#125;;</span><br><span class=line>           bound.prototype = <span class=built_in>Object</span>.create(fn.prototype);</span><br><span class=line>           <span class=keyword>return</span> bound;</span><br><span class=line>      &#125;;</span><br><span class=line> &#125;   </span><br><span class=line></span><br><span class=line><span class=function><span class=keyword>function</span> <span class=title>foo</span>(<span class=params></span>) </span>&#123;</span><br><span class=line>     <span class=built_in>console</span>.log(<span class=string>"name: "</span> + <span class=keyword>this</span>.name);</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=keyword>var</span> obj  = &#123; name: <span class=string>"obj"</span> &#125;,</span><br><span class=line>    obj2 = &#123; name: <span class=string>"boj2"</span> &#125;,</span><br><span class=line>    obj3 = &#123; name: <span class=string>"obj3"</span> &#125;;</span><br><span class=line></span><br><span class=line><span class=keyword>var</span> fooOBJ = foo.softBind(obj);</span><br><span class=line>fooOBJ(); <span class=comment>// name: obj   // 软绑定</span></span><br><span class=line></span><br><span class=line>obj2.foo = foo.softBind(obj);</span><br><span class=line>obj2.foo(); <span class=comment>// name: obj2     // 隐式绑定</span></span><br><span class=line></span><br><span class=line>fooOBJ.call(obj3); <span class=comment>// name: obj3   // 显式绑定</span></span><br><span class=line></span><br><span class=line>setTimeout(obj2.foo, <span class=number>10</span>); <span class=comment>// name: obj  // 软绑定  在浏览器中</span></span><br><span class=line><span class=comment>//javascript函数参数只能按值传递， 传参赋值造成了间接引用， 从而造成了隐式丢失，所以只剩下了软绑定</span></span><br><span class=line><span class=comment>//在nodejs中， 结果为：name: undefined    // 推理： 执行obj2.foo函数时，引用的变量obj 。。。。待续</span></span><br></pre></td></tr></table></figure></li></ul><h3 id=隐式绑定><a href=#隐式绑定 class=headerlink title=隐式绑定></a>隐式绑定</h3><ul><li>调用位置的上下文对象；</li><li>隐式丢失: 传入回调函数时会发生隐式赋值</li></ul><h3 id=显式绑定><a href=#显式绑定 class=headerlink title=显式绑定></a>显式绑定</h3><ul><li>.call</li><li>.apply</li><li><p>.forEach (not support es3)</p><p>Array.forEach(f[, o])</p></li></ul><p>- 如果指定了第二个参数o， 则执行显式绑定（通过apply实现），函数f的this绑定到o；</p><ul><li><p>硬绑定 （显式绑定的变种）：只能绑定一次，无法使用隐式绑定和显式绑定来修改this</p><ul><li><p>.bind (not support es3)</p><p>foo.bind(obj) 会返回一个硬编码的新函数， 它会把参数obj设置为this绑定并调用原始函数foo</p></li><li><p>手动硬绑定 会比bind函数的性能更好些</p><figure class="highlight javascript"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>var</span> EventEmitter = <span class=built_in>require</span>(<span class=string>'events'</span>);</span><br><span class=line><span class=keyword>var</span> util = <span class=built_in>require</span>(<span class=string>'util'</span>);</span><br><span class=line></span><br><span class=line><span class=function><span class=keyword>function</span> <span class=title>MyThing</span>(<span class=params></span>) </span>&#123;</span><br><span class=line>  EventEmitter.call(<span class=keyword>this</span>);</span><br><span class=line></span><br><span class=line>  doFirstThing();</span><br><span class=line>  setImmediate(emitThing1, <span class=keyword>this</span>);</span><br><span class=line>&#125;</span><br><span class=line>util.inherits(MyThing, EventEmitter);</span><br><span class=line></span><br><span class=line><span class=function><span class=keyword>function</span> <span class=title>emitThing1</span>(<span class=params>self</span>) </span>&#123;</span><br><span class=line>  self.emit(<span class=string>'thing1'</span>);</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=keyword>var</span> mt = <span class=keyword>new</span> MyThing();</span><br><span class=line></span><br><span class=line>mt.on(<span class=string>'thing1'</span>, <span class=function><span class=keyword>function</span> <span class=title>onThing1</span>(<span class=params></span>) </span>&#123;</span><br><span class=line>  <span class=comment>// Whoot!</span></span><br><span class=line>&#125;);</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id=new绑定><a href=#new绑定 class=headerlink title=new绑定></a>new绑定</h3><ol><li><p>创建一个新对象；</p></li><li><p>调用构造函数产生的执行环境中的this指向这个新对象；</p></li><li><p>执行构造函数中的代码（为新对象添加属性）；</p></li><li><p>如果函数没有返回其它对象，那么返回这个新对象。</p></li></ol><h3 id=更安全的this><a href=#更安全的this class=headerlink title=更安全的this></a>更安全的this</h3><figure class="highlight javascript"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class=comment>//空的非委托对象</span></span><br><span class=line><span class=keyword>var</span>   ∅ = <span class=built_in>Object</span>.create(<span class=literal>null</span>);</span><br></pre></td></tr></table></figure><ul><li><p>传给call, apply, bind</p></li><li><p>Object.create(null) 和 {} 很像， 但是并不会创建Object.prototype这个委托， 所以它比{} “更空”。</p></li></ul><h3 id=this间接引用><a href=#this间接引用 class=headerlink title=this间接引用></a>this间接引用</h3><figure class="highlight javascript"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br></pre></td><td class=code><pre><span class=line><span class=function><span class=keyword>function</span> <span class=title>foo</span>(<span class=params></span>)</span>&#123;</span><br><span class=line>     <span class=built_in>console</span>.log(<span class=keyword>this</span>.a);</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=keyword>var</span> a = <span class=number>2</span>;</span><br><span class=line><span class=keyword>var</span> o = &#123; a: <span class=number>3</span>, foo: foo&#125;;</span><br><span class=line><span class=keyword>var</span> p = &#123; a: <span class=number>4</span>&#125;;</span><br><span class=line></span><br><span class=line>o.foo();  <span class=comment>// 3</span></span><br><span class=line></span><br><span class=line>(o.foo)();  <span class=comment>// 3</span></span><br><span class=line></span><br><span class=line>(p.foo = o.foo)();  <span class=comment>//  2     //赋值表达式的值 就是右操作数的值</span></span><br><span class=line></span><br><span class=line>p.foo();   <span class=comment>//  4</span></span><br><span class=line>(p.foo)();   <span class=comment>// 4</span></span><br><span class=line></span><br><span class=line><span class=keyword>var</span> bar = o.foo;</span><br><span class=line>bar();   <span class=comment>//  2</span></span><br></pre></td></tr></table></figure><ul><li>赋值表达式p.foo = o.foo的返回值是目标函数的引用，因此调用位置是foo()而不是p.foo()或者o.foo()。</li></ul><h3 id=gt-箭头函数-this-绑定><a href=#gt-箭头函数-this-绑定 class=headerlink title="=&gt; 箭头函数 this 绑定"></a>=&gt; 箭头函数 this 绑定</h3><ul><li>继承外层作用域this 绑定</li><li>this 绑定不可被修改</li></ul></div><div></div><div></div><footer class=post-footer><div class=post-tags><a href="/tags/this/" rel=tag>#this</a> <a href="/tags/bind/" rel=tag>#bind</a> <a href="/tags/javascirpt/" rel=tag>#javascirpt</a></div><div class=post-nav><div class="post-nav-next post-nav-item"></div><div class="post-nav-prev post-nav-item"><a href="/2016/08/22/cross-origin request technology/" rel=prev title=跨域请求技术>跨域请求技术 <i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class=post-spread></div></div></div><div class=comments id=comments><div class=ds-thread data-thread-key=2016/06/03/the this" binding in javascript " data-title="javascript 中的 this 绑定" data-url=http://Yann-Wang.github.io/2016/06/03/the></div></div></div><div class=sidebar-toggle><div class=sidebar-toggle-line-wrap><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id=sidebar class=sidebar><div class=sidebar-inner><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target=post-toc-wrap>文章目录</li><li class=sidebar-nav-overview data-target=site-overview>站点概览</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image src=/uploads/avatar2.png alt=Yann-Wang><p class=site-author-name itemprop=name>Yann-Wang</p><p class="site-description motion-element" itemprop=description>写技术，写心情，写日记</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href=/archives><span class=site-state-item-count>2</span> <span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories><span class=site-state-item-count>1</span> <span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags><span class=site-state-item-count>10</span> <span class=site-state-item-name>标签</span></a></div></nav><div class="links-of-author motion-element"><span class=links-of-author-item><a href=https://github.com/Yann-Wang target=_blank title=GitHub><i class="fa fa-fw fa-github"></i> GitHub</a></span> <span class=links-of-author-item><a href=http://weibo.com/u/2277066155 target=_blank title=微博><i class="fa fa-fw fa-globe"></i> 微博</a></span> <span class=links-of-author-item><a href="http://douban.com/people/67972869/" target=_blank title=豆瓣><i class="fa fa-fw fa-globe"></i> 豆瓣</a></span> <span class=links-of-author-item><a href=http://www.zhihu.com/people/casual_spindrift target=_blank title=知乎><i class="fa fa-fw fa-globe"></i> 知乎</a></span></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class=post-toc><div class=post-toc-content><ol class=nav><li class="nav-item nav-level-2"><a class=nav-link href=#javascript-中的-this-绑定><span class=nav-number>1.</span> <span class=nav-text>javascript 中的 this 绑定</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#默认绑定：><span class=nav-number>1.1.</span> <span class=nav-text>默认绑定：</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#软绑定><span class=nav-number>1.2.</span> <span class=nav-text>软绑定</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#隐式绑定><span class=nav-number>1.3.</span> <span class=nav-text>隐式绑定</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#显式绑定><span class=nav-number>1.4.</span> <span class=nav-text>显式绑定</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#new绑定><span class=nav-number>1.5.</span> <span class=nav-text>new绑定</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#更安全的this><span class=nav-number>1.6.</span> <span class=nav-text>更安全的this</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#this间接引用><span class=nav-number>1.7.</span> <span class=nav-text>this间接引用</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#gt-箭头函数-this-绑定><span class=nav-number>1.8.</span> <span class=nav-text>=> 箭头函数 this 绑定</span></a></li></ol></li></ol></div></div></section></div></aside></div></main><footer id=footer class=footer><div class=footer-inner><div class=copyright>&copy; <span itemprop=copyrightYear>2016</span> <span class=with-love><i class="fa fa-heart"></i></span> <span class=author itemprop=copyrightHolder>Yann-Wang</span></div></div></footer><div class=back-to-top><i class="fa fa-arrow-up"></i></div></div><script type=text/javascript>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script><script type=text/javascript src="/vendors/jquery/index.js?v=2.1.3"></script><script type=text/javascript src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type=text/javascript src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type=text/javascript src="/vendors/velocity/velocity.min.js?v=1.2.1"></script><script type=text/javascript src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script><script type=text/javascript src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type=text/javascript src="/js/src/utils.js?v=5.0.1"></script><script type=text/javascript src="/js/src/motion.js?v=5.0.1"></script><script type=text/javascript src="/js/src/affix.js?v=5.0.1"></script><script type=text/javascript src="/js/src/schemes/pisces.js?v=5.0.1"></script><script type=text/javascript src="/js/src/scrollspy.js?v=5.0.1"></script><script type=text/javascript src="/js/src/post-details.js?v=5.0.1"></script><script type=text/javascript src="/js/src/bootstrap.js?v=5.0.1"></script><script type=text/javascript>
    var duoshuoQuery = {short_name:"Yann-Wang"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script><script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script><script src=/js/src/hook-duoshuo.js></script></body></html>